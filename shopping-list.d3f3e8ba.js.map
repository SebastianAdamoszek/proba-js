{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f204699c3b7016d1.js","src/js/shopping-list-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-dc082ffa0fdd1c6a.js","node_modules/@parcel/runtime-js/lib/runtime-25c3fa4effdc13bc.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"29lct\\\":\\\"shopping-list.d3f3e8ba.js\\\",\\\"8yB8n\\\":\\\"amazon-light-mode.2bed2965.svg\\\",\\\"1S3Rj\\\":\\\"apple-books.1507f0a5.svg\\\",\\\"bSbOs\\\":\\\"shopping-list.bc1d8e16.css\\\",\\\"8H24j\\\":\\\"index.ded362ba.js\\\"}\"));","import Notiflix from 'notiflix';\nimport * as localStorage from './local-storage.js';\nimport { getBooksApi } from './api.js';\nimport amazonIcon from '/src/images/amazon-light-mode.svg';\nimport appleBooksIcon from '/src/images/apple-books.svg';\nimport { updateBookCount } from './book-count.js';\n\nlet booksIdList = localStorage.load('myBooksId') || [];\nconst cardsList = document.querySelector('.cards-list');\nconst shoppingEmpty = document.querySelector('.shopping-empty');\nshoppingEmpty.style.display = 'none';\nconst loaderShoppingList = document.querySelector('.loader--shopping-list');\nloaderShoppingList.style.display = 'none';\n\nlet currentPage = 1;\nconst booksPerPage = 3;\n\nconst nextButton = document.querySelector('.next-page');\nconst prevButton = document.querySelector('.prev-page');\n\n// Function to update the page buttons\nconst updatePageButtons = () => {\n  if (booksIdList.length <= booksPerPage) {\n    nextButton.style.display = 'none';\n    prevButton.style.display = 'none';\n  } else if (currentPage === 1) {\n    nextButton.style.display = 'block';\n    prevButton.style.display = 'none';\n  } else if (currentPage === Math.ceil(booksIdList.length / booksPerPage)) {\n    nextButton.style.display = 'none';\n    prevButton.style.display = 'block';\n  } else {\n    nextButton.style.display = 'block';\n    prevButton.style.display = 'block';\n  }\n};\n\n// Event handler for next page button\nnextButton.addEventListener('click', () => {\n  if (currentPage < Math.ceil(booksIdList.length / booksPerPage)) {\n    currentPage++;\n    renderList(booksIdList, currentPage);\n  }\n});\n\n// Event handler for previous page button\nprevButton.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage--;\n    renderList(booksIdList, currentPage);\n  }\n});\n\n// Function: Creating book-card markup and adding to DOM //\nconst showMyBook = myBook => {\n  const { _id, book_image, title, list_name, description, author, buy_links } = myBook;\n  const markup = `<li class=\"card-item\">\n        <div class=\"card-item__box\">\n          <div class=\"remove-button\">\n            <button type=\"button\" class=\"remove-button__box\" data-id=\"${_id}\"></button>\n          </div>\n          <div class=\"card-item__img-box\">\n            <img\n              src=\"${book_image}\"\n              alt=\"Book cover\"\n              class=\"card-item__img\"\n            />\n          </div>\n          <div class=\"card-item__info\">\n            <div class=\"card-item__info-body\">\n              <h2 class=\"card-item__title\">${title}</h2>\n              <h3 class=\"card-item__category\">${list_name}</h3>\n              <p class=\"card-item__description\">\n              ${description}\n              </p>\n            </div>\n            <div class=\"card-item__info-footer\">\n              <div class=\"card-item__author-box\">\n                <p class=\"card-item__author\">${author}</p>\n              </div>\n              <div class=\"card-item__shops\">\n                <ul class=\"shops-list\">\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[0].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--amazon\">\n                        <img\n                          src=\"${amazonIcon}\"\n                          alt=\"Amazon logo\"\n                          class=\"shops-list__icon-img-amazon\"\n                        /></div\n                    ></a>\n                  </li>\n                  <li class=\"shops-list__item\">\n                    <a\n                      href=\"${buy_links[1].url}\"\n                      target=\"_blank\"\n                      rel=\"nofollow noopener noreferrer\"\n                      class=\"shops-list__link\"\n                      ><div class=\"shops-list__icon-box shops-list__icon-box--apple\">\n                        <img\n                          src=\"${appleBooksIcon}\"\n                          alt=\"Apple Books logo\"\n                          class=\"shops-list__icon-img-apple\"\n                        /></div\n                    ></a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>`;\n  cardsList.insertAdjacentHTML('beforeend', markup);\n};\n\n// Fetch books by IDs from array and render list //\nconst renderList = (array, page) => {\n  loaderShoppingList.style.display = 'block';\n  const startIndex = (page - 1) * booksPerPage;\n  const endIndex = startIndex + booksPerPage;\n  const booksToDisplay = array.slice(startIndex, endIndex);\n\n  cardsList.innerHTML = '';\n\n  booksToDisplay.forEach(bookID => {\n    getBooksApi(bookID)\n      .then(book => {\n        loaderShoppingList.style.display = 'none';\n        return showMyBook(book.data);\n      })\n      .catch(error => {\n        Notiflix.Notify.failure('Ooops... Coś poszło nie tak! Proszę spróbuj ponownie.');\n      });\n  });\n\n  updatePageButtons();\n};\n\n// Load / refresh page event listener //\nwindow.addEventListener('load', () => {\n  cardsList.innerHTML = '';\n  booksIdList = localStorage.load('myBooksId'); // <--- \"key\"\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n\n  if (booksIdList.length > booksPerPage) {\n    document.querySelector('.pagination').style.display = 'block';\n  } else {\n    document.querySelector('.pagination').style.display = 'none';\n  }\n  renderList(booksIdList, currentPage);\n  cardsList.addEventListener('click', removeCardHandler);\n  updatePageButtons();\n});\n\n// Function to update current page when removing the last item\nconst updateCurrentPage = () => {\n  if (booksIdList.length % booksPerPage === 0) {\n    currentPage = Math.floor(booksIdList.length / booksPerPage);\n  } else {\n    currentPage = Math.floor(booksIdList.length / booksPerPage) + 1;\n  }\n};\n\n// Function: remove card by book ID //\nconst removeCard = cardId => {\n  const indexToRemove = booksIdList.indexOf(cardId);\n  booksIdList.splice(indexToRemove, 1);\n  localStorage.save('myBooksId', booksIdList);\n  cardsList.innerHTML = '';\n\n  if (booksIdList.length === 0) {\n    shoppingEmpty.style.display = 'flex';\n    cardsList.removeEventListener('click', removeCardHandler);\n    return;\n  }\n\n  updateCurrentPage(); // Update the current page after removal\n  renderList(booksIdList, currentPage);\n};\n\n// Event handler: remove button \"click\" //\nconst removeCardHandler = event => {\n  if (!event.target.classList.contains('remove-button__box')) {\n    return;\n  }\n  const removeCardId = event.target.dataset.id;\n  removeCard(removeCardId);\n};\n\n// book counting function\nupdateBookCount();\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8yB8n\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1S3Rj\")).toString();"],"names":["$d49cb2d7b03f6a77$export$6503ec6e8aabbaf","$d49cb2d7b03f6a77$export$f7ad0328861e2f03","$d49cb2d7b03f6a77$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$7IoHk","$dbca00df9ebb3e88$exports","URL","resolve","import","meta","url","toString","$2cd2469f48b45cbc$exports","$2ab7b98accde8d70$var$booksIdList","$b374K","load","$2ab7b98accde8d70$var$cardsList","document","querySelector","$2ab7b98accde8d70$var$shoppingEmpty","style","display","$2ab7b98accde8d70$var$loaderShoppingList","$2ab7b98accde8d70$var$currentPage","$2ab7b98accde8d70$var$nextButton","$2ab7b98accde8d70$var$prevButton","$2ab7b98accde8d70$var$updatePageButtons","Math","ceil","addEventListener","$2ab7b98accde8d70$var$renderList","array","page","startIndex","endIndex","booksToDisplay","slice","innerHTML","forEach","bookID","$lXnOV","getBooksApi","then","book","myBook","_id","book_image","title","list_name","description","author","buy_links","markup","$parcel$interopDefault","insertAdjacentHTML","$2ab7b98accde8d70$var$showMyBook","data","catch","error","Notify","failure","window","removeEventListener","$2ab7b98accde8d70$var$removeCardHandler","$2ab7b98accde8d70$var$removeCard","cardId","indexToRemove","indexOf","splice","save","floor","event","target","classList","contains","removeCardId","dataset","$IsBYg","updateBookCount"],"version":3,"file":"shopping-list.d3f3e8ba.js.map"}